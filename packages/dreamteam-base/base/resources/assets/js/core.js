(()=>{function e(){$(".popup-container").removeClass("show"),$("body").css("overflow","auto"),setTimeout((function(){$(".popup-container .popup-title").empty()}),1e3)}function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"progress",t=$("input.newUpdateUrl").val();checkEmpty(t)&&(t=window.location.href),loadAjaxGet(t,{beforeSend:function(){},success:function(e){$("#listdata").find("table.table").find("tbody").html(e.data_html),$("#listdata").find(".pagination-sm").html(e.paginate),$(".top_html").html(e.top_html),$("#listdata").find(".total").html(e.show_data.total),setTimeout((function(){$("#listdata").find(".table-responsive").animate({scrollTop:0},500)}),200)},error:function(e){}},e)}function a(e,t,a){$(a).on("keyup change",(function(){switch(t){case 1:e?localStorage.setItem("".concat(window.location.href,"__").concat($(a).attr("id")),$(a).prop("checked")):localStorage.setItem("".concat(window.location.href,"__").concat($(a).attr("name")),$(a).prop("checked"));break;case 2:e?localStorage.setItem("".concat(window.location.href,"__").concat($(a).attr("id")),$(a).val()):localStorage.setItem("".concat(window.location.href,"__").concat($(a).attr("name")),$(a).val())}}))}$(document).ready((function(){admin_dir=$("meta[name=admin_dir]").attr("content"),$("body").on("click","*[data-gototop]",(function(e){e.preventDefault(),$("html, body").animate({scrollTop:0},"slow")})),$("body").on("click","*[data-language]",(function(e){e.preventDefault(),value=$(this).data("language"),"pre"!=$(this).prop("tagName").toLowerCase()&&(pushOrUpdate({setLanguage:value}),window.location.href=window.location.href)})),$("body").on("change","*[data-language_table]",(function(e){e.preventDefault(),value=$(this).val(),setCookie("table_locale",value,1),t("progress")})),$("body").on("change","*[data-pagesize]",(function(e){e.preventDefault(),value=$(this).val(),setCookie("dreamteam_page_size",value,1),t("progress")})),$("body").on("click","*[data-scroll]",(function(e){e.preventDefault(),id=$(this).data("scroll"),offset_top=$(this).data("top"),checkEmpty(offset_top)?offset_top=$(id).offset().top:offset_top=$(id).offset().top-offset_top,$("html, body").animate({scrollTop:offset_top},500)})),$("body").on("click","*[data-toggle_btn]",(function(e){e.preventDefault(),$(this).toggleClass("active"),$(this).closest("*[data-toggle_wrap]").find("*[data-toggle_box]").slideToggle()})),$("body").on("click","#listdata .search-container .search-btn",(function(e){e.preventDefault(),form_serialize=$(this).closest("form").serialize(),checkEmpty(window.location.search)?form_serialize="?"+form_serialize:form_serialize=window.location.search+"&"+form_serialize;var a=window.location.origin+window.location.pathname+form_serialize;newUpdateUrl(a),t()})),$("body").on("click","*[data-order_by]",(function(e){e.preventDefault(),order_by=$(this).data("order_by"),order_fields=$(this).data("order_fields"),"desc"==order_by?$(this).data("order_by","asc"):$(this).data("order_by","desc"),newPushOrUpdate({order_fields,order_by}),t()})),$("body").on("click","#listdata .pagination-sm .relative a",(function(e){e.preventDefault(),href=$(this).attr("href"),page=getUrlParameter(href,"page"),newPushOrUpdate({page}),t()})),$("body").on("change",".checkall",(function(e){$checkall=$(this).is(":checked"),$(this).closest("#listdata").find(".checkone").prop("checked",$checkall)})),$("body").on("change","*[data-quick_edit]",(function(e){e.preventDefault(),value=$(this).val(),table=$(this).closest("*[data-table]").data("table"),id=$(this).closest("*[data-id]").data("id"),field=$(this).attr("name");var t=[];t.push(id),data={table,id_array:t,value,field},loadAjaxPost("/"+admin_dir+"/ajax/quick_edit",data,{beforeSend:function(){},success:function(e){1==e.status?alertText(e.message):alertText(e.message,"warning")},error:function(e){}})})),$("body").on("change","#listdata .form-switch input",(function(e){e.preventDefault(),$(this).is(":checked")?value=1:value=0,table=$(this).closest("*[data-table]").data("table"),id=$(this).closest("*[data-id]").data("id"),field=$(this).attr("name");var t=[];t.push(id),data={table,id_array:t,value,field},loadAjaxPost("/"+admin_dir+"/ajax/quick_edit",data,{beforeSend:function(){},success:function(e){1==e.status?alertText(e.message):alertText(e.message,"warning")},error:function(e){}})})),$("body").on("click","*[data-quick_delete]",(function(e){e.preventDefault(),table=$(this).closest("*[data-table]").data("table"),id=$(this).closest("*[data-id]").data("id");var a=[];a.push(id),data={table,id_array:a},confirm($(this).data("message"))&&loadAjaxPost("/"+admin_dir+"/ajax/quick_delete",data,{beforeSend:function(){},success:function(e){1==e.status?(alertText(e.message),t("no_action")):alertText(e.message,"warning")},error:function(e){}})})),$("body").on("click","*[data-delete_custom]",(function(e){e.preventDefault(),table=$(this).closest("*[data-table]").data("table"),id=$(this).closest("*[data-id]").data("id"),data={_method:"DELETE"},confirm($(this).data("message"))&&loadAjaxPost("/"+admin_dir+"/"+table+"/"+id,data,{beforeSend:function(){},success:function(e){1==e.status?(alertText(e.message),t("no_action")):alertText(e.message,"warning")},error:function(e){}})})),$("body").on("click","*[data-quick_restore]",(function(e){e.preventDefault(),table=$(this).closest("*[data-table]").data("table"),id=$(this).closest("*[data-id]").data("id");var a=[];a.push(id),data={table,id_array:a},loadAjaxPost("/"+admin_dir+"/ajax/quick_restore",data,{beforeSend:function(){},success:function(e){1==e.status?(alertText(e.message),t("no_action")):alertText(e.message,"warning")},error:function(e){}})})),$("body").on("click","*[data-action_all]",(function(e){if(e.preventDefault(),e=$(this),value=$(this).parents(".box-action").find("select[data-action]").val(),-2==value)return alertText($(this).data("warning"),"warning"),!1;table=$(this).data("table"),field=$("select[data-action]").data("field");var a=[];e.closest("#listdata").find(".checkone:checked").each((function(){id=$(this).closest("*[data-id]").data("id"),a.push(id)})),-3==value?"undefined"!=typeof id?(data={_method:"DELETE",idArray:a},confirm($(this).data("message"))&&loadAjaxPost("/"+admin_dir+"/"+table+"/delete-forever/"+id,data,{beforeSend:function(){},success:function(e){1==e.status?(alertText(e.message),t("no_action"),$(".modal-backdrop").remove()):alertText(e.message,"warning")},error:function(e){}})):alertText($(this).data("null"),"warning"):(data={table,id_array:a,value,field},loadAjaxPost("/"+admin_dir+"/ajax/quick_edit",data,{beforeSend:function(){},success:function(a){1==a.status?(alertText(a.message),t("no_action"),e.closest("#listdata").find(".checkall").prop("checked",!1)):alertText(a.message,"warning")},error:function(e){}}))})),$("body").on("click","*[data-image]",(function(e){e.preventDefault(),url_media=$(this).data("image"),$("#media").find("iframe").attr("src",url_media),$("#media").modal("toggle")})),$("#media").on("hidden.bs.modal",(function(){$("#media").find("iframe").attr("src","")})),$("body").on("click","*[data-delete_nocomfirm]",(function(e){e.preventDefault(),$(this).closest("*[data-delete_box]").remove()})),$("body").on("click","*[data-delete_comfirm]",(function(e){e.preventDefault(),confirm_text=$(this).data("delete_comfirm"),confirm(confirm_text)&&$(this).closest("*[data-delete_box]").remove()})),$("body").on("click","*[data-cache_clear]",(function(e){e.preventDefault(),loadAjaxPost("/"+admin_dir+"/ajax/cache_clear",{},{beforeSend:function(){},success:function(e){1==e.status?alertText(e.message):alertText(e.message,"error")},error:function(e){}},"progress")})),$("body").on("click","*[data-delete_admin_user]",(function(e){e.preventDefault(),table=$(this).closest("*[data-table]").data("table"),user_id=$(this).parents(".modal-content").find('input[name="user_id"]').val(),user_id_replace=$(this).closest(".modal-content").find('select[name="admin_users_list"]').val(),data={_method:"DELETE",user_id_replace,user_id},confirm($(this).data("message"))&&loadAjaxPost("/"+admin_dir+"/"+table+"/"+user_id,data,{beforeSend:function(){},success:function(e){1==e.status?(alertText(e.message),window.location.reload()):alertText(e.message,"warning")},error:function(e){}})})),$("body .on-of-checkbox-config.hide").hide(),$("body").on("change",".toggle-on-off-checkbox input",(function(){$(this).prop("checked")?$(this).parents(".card-body").find(".on-of-checkbox-config").show():$(this).parents(".card-body").find(".on-of-checkbox-config").hide()})),$("body").on("click","*[data-delete_forever]",(function(e){e.preventDefault();var a=$(this),o=a.closest("*[data-table]").data("table"),n=a.data("id"),i={_method:"DELETE",id:n,table:o};confirm($(this).data("message"))&&loadAjaxPost("/"+admin_dir+"/"+o+"/delete-forever/"+n,i,{beforeSend:function(){},success:function(e){1==e.status?(alertText(e.message),t("no_action")):alertText(e.message,"warning")},error:function(e){}})})),$("body").on("click",".form-submit-confirm",(function(e){confirm(form_delete_confirm||"Bạn có chắc chắn muốn xoá dữ liệu? Dữ liệu được xoá là vĩnh viễn không thể khôi phục.")||e.preventDefault()}))})),$("body").on("click","*[close-alert]",(function(e){e.preventDefault(),$(this).hide()})),$("body").on("click",".popup-container .popup-bottom button",(function(e){e.preventDefault(),$(this).closest(".popup-container").removeClass("show"),$("body").css("overflow","auto"),setTimeout((function(){$(".popup-container .popup-title").empty()}),1e3)})),$("body").on("keyup",(function(t){27===t.keyCode&&e()})),$("body").on("click",".popup-container",(function(t){$(t.target).is(".show")&&e(),t.preventDefault()})),window.closePopup=e,window.loadData=t,window.addLoadingBtn=function(e){$(e).prepend('<i id="loadingIcon" class="fa fa-spinner fa-spin" style="margin-right: 3px"></i>'),$(e).prop("disabled",!0)},window.removeLoadingBtn=function(e){$(e).find(".fa-spinner").remove(),$(e).prop("disabled",!1)},window.customAutoSave=a,$(document).ready((function(){window.location.href.includes("/create")&&$(".form-horizontal .form-control, .form-check-input").each((function(e,t){var o="";null==$(t).attr("id")?(o=localStorage.getItem("".concat(window.location.href,"__").concat($(t).attr("name"))),-1!==$.inArray($(t).prop("type"),["checkbox","radio"])?(null!=o&&$(".form-horizontal ".concat($(t).prop("tagName"),'[name="').concat($(t).attr("name"),'"]')).prop("checked",JSON.parse(o)),a(!1,1,t)):(null!=o&&$(".form-horizontal ".concat($(t).prop("tagName"),'[name="').concat($(t).attr("name"),'"]')).val(o),a(!1,2,t))):(o=localStorage.getItem("".concat(window.location.href,"__").concat($(t).attr("id"))),-1!==$.inArray($(t).prop("type"),["checkbox","radio"])?(null!=o&&$(".form-horizontal #".concat($(t).attr("id"))).prop("checked",JSON.parse(o)),a(!0,1,t)):(null!=o&&$(".form-horizontal #".concat($(t).attr("id"))).val(o),a(!0,2,t))),null!=o&&$(t).change()}))}))})();